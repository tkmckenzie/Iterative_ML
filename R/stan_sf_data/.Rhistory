system("g++ -v")
cat('Sys.setenv(BINPREF = "C:/Rtools/mingw_$(WIN)/bin/")',
file = file.path(Sys.getenv("HOME"), ".Rprofile"),
sep = "\n", append = TRUE)
source('~/git/Iterative_ML/R/stan_sf_data/gp_sf_fit.R', echo=TRUE)
#Trace plot:
traceplot(stan.fit)
source('~/git/Iterative_ML/R/stan_sf_data/gp_sf_fit.R', echo=TRUE)
#Trace plot:
traceplot(stan.fit)
source('~/git/Iterative_ML/R/stan_sf_data/gp_sf_fit.R', echo=TRUE)
#Trace plot:
traceplot(stan.fit)
cbind(countries, apply(exp(u.posterior), 2, mean))
cbind(countries, round(apply(exp(u.posterior), 2, mean), 5))
sigma.u.restricted = mean(stan.extract$sigma_u)
sigma.v.restricted = mean(stan.extract$sigma_v)
H.inv.diag.restricted = apply(stan.extract$H_inv_diag, 2, mean)
alpha.restricted = mean(stan.extract$alpha)
eta.restricted = apply(stan.extract$eta, 2, mean)
cov = normal.cov(alpha.restricted, diag(H.inv.diag.restricted))
L = t(chol(cov))
f = L %*% eta.restricted
epsilon = c(y - f)
log.lik = sum(sapply(epsilon, log.lik.func, sigma.u = sigma.u.restricted, sigma.v = sigma.v.restricted))
log.lik
i = 500
sigma.u.restricted = stan.extract$sigma_u[i]
sigma.v.restricted = stan.extract$sigma_v[i]
H.inv.diag.restricted = stan.extract$H_inv_diag[i,]
alpha.restricted = stan.extract$alpha[i]
eta.restricted = stan.extract$eta[i,]
cov = normal.cov(alpha.restricted, diag(H.inv.diag.restricted))
L = t(chol(cov))
f = L %*% eta.restricted
i = 500
sigma.u.restricted = stan.extract$sigma_u[i]
sigma.v.restricted = stan.extract$sigma_v[i]
H.inv.diag.restricted = stan.extract$H_inv_diag[i,]
alpha.restricted = stan.extract$alpha[i]
eta.restricted = stan.extract$eta[i,]
cov = normal.cov(alpha.restricted, diag(H.inv.diag.restricted))
L = t(chol(cov))
f = L %*% eta.restricted
f - stan.extract$f
dim(stan.extract$f)
f - stan.extract$f[,i]
f - stan.extract$f[i,]
f
i = sample(sample.iter, 1)
sigma.u.restricted = stan.extract$sigma_u[i]
function (x, size, replace = FALSE, prob = NULL)
i = sample(sample.iter, 1)
sigma.u.restricted = stan.extract$sigma_u[i]
i = sample(sample.iter, 1)
sigma.u.restricted = stan.extract$sigma_u[i]
bsigma.v.restricted = stan.extract$sigma_v[i]
H.inv.diag.restricted = stan.extract$H_inv_diag[i,]
alpha.restricted = stan.extract$alpha[i]
eta.restricted = stan.extract$eta[i,]
alpha.restricted = stan.extract$alpha[i]
=
alpha.restricted = stan.extract$alpha[i]
eta.restricted = stan.extract$eta[i,]
cov = normal.cov(alpha.restricted, diag(H.inv.diag.restricted))
L = t(chol(cov))
f = L %*% eta.restricted
f - stan.extract$f[i,]
sigma.u.restricted = mean(stan.extract$sigma_u)
sigma.v.restricted = mean(stan.extract$sigma_v)
H.inv.diag.restricted = apply(stan.extract$H_inv_diag, 2, mean)
alpha.restricted = mean(stan.extract$alpha)
eta.restricted = apply(stan.extract$eta, 2, mean)
eta
eta.restricted
alpha.restricted
H.inv.diag.restricted
sigma.u.restricted = mean(stan.extract$sigma_u)
sigma.v.restricted = mean(stan.extract$sigma_v)
H.inv.diag.restricted = apply(stan.extract$H_inv_diag, 2, mean)
alpha.restricted = mean(stan.extract$alpha)
eta.restricted = apply(stan.extract$eta, 2, mean)
L = t(chol(cov))
cov = normal.cov(alpha.restricted, diag(H.inv.diag.restricted))
L = t(chol(cov))
f = L %*% eta.restricted
f - stan.extract$f[i,]
f
epsilon = c(y - f)
epsion
epsilon
sigma.u.restricted = median(stan.extract$sigma_u)
sigma.v.restricted = median(stan.extract$sigma_v)
H.inv.diag.restricted = apply(stan.extract$H_inv_diag, 2, median)
alpha.restricted = median(stan.extract$alpha)
eta.restricted = apply(stan.extract$eta, 2, median)
cov = normal.cov(alpha.restricted, diag(H.inv.diag.restricted))
L = t(chol(cov))
f = L %*% eta.restricted
f - stan.extract$f[i,]
epsilon = c(y - f)
log.lik = sum(sapply(epsilon, log.lik.func, sigma.u = sigma.u.restricted, sigma.v = sigma.v.restricted))
log.lik
source('~/git/Iterative_ML/R/stan_sf_data/gp_sf_fit_ml_calc.R', echo=TRUE)
source('~/git/Iterative_ML/R/stan_sf_data/gp_sf_fit.R', echo=TRUE)
